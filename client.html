<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control Remoto - Michi</title>
    <style>
      body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; padding: 20px; background-color: #f0f0f0; max-width: 600px; margin: auto; }
      h1 { color: #333; }
      #messages { border: 1px solid #ccc; padding: 10px; height: 200px; overflow-y: scroll; background: white; margin-bottom: 10px; }
      #messages p { margin: 0; padding: 2px 0; border-bottom: 1px solid #eee; font-size: 0.9em; }
      #messages p:last-child { border-bottom: none; }
      #ws-controls { display: flex; gap: 10px; }
      #messageInput { flex-grow: 1; padding: 8px; font-size: 1em; border: 1px solid #ccc; border-radius: 4px; }
      #sendButton { padding: 8px 15px; font-size: 1em; background-color: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>ðŸ“± Control Remoto Michi</h1>
    <p>EnvÃ­a un mensaje al servidor y mira la respuesta.</p>
    <div id="messages"></div>
    <div id="ws-controls">
        <input type="text" id="messageInput" placeholder="Escribe un mensaje...">
        <button id="sendButton">Enviar</button>
    </div>

    <script>
      // Conecta al servidor WebSocket usando la direcciÃ³n del host de la pÃ¡gina.
      const ws = new WebSocket(`ws://${window.location.host}`);

      const messagesDiv = document.getElementById('messages');
      const messageInput = document.getElementById('messageInput');
      const sendButton = document.getElementById('sendButton');

      function addMessage(message, from = '') {
        const p = document.createElement('p');
        p.textContent = `${from ? from + ': ' : ''}${message}`;
        messagesDiv.appendChild(p);
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
      }

      ws.onopen = () => addMessage('Conectado al servidor.', 'Sistema');
      ws.onclose = () => addMessage('Desconectado del servidor.', 'Sistema');
      ws.onmessage = (event) => addMessage(event.data, 'Servidor');

      function sendMessage() {
        const message = messageInput.value;
        if (message.trim()) {
          ws.send(message);
          addMessage(message, 'TÃº');
          messageInput.value = '';
        }
      }

      sendButton.addEventListener('click', sendMessage);
      messageInput.addEventListener('keypress', (event) => {
        if (event.key === 'Enter') sendMessage();
      });
    </script>
</body>
</html>

